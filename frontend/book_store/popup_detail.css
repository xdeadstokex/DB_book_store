/* --- DETAIL WRAPPER (Generic) --- */
.detail-wrapper {
    display: flex; flex-direction: column; height: 100%;
    gap: 15px; z-index: 2; position: relative;
    color: var(--text-main);
}

/* --- HEADER --- */
.detail-header {
    border-bottom: 1px solid var(--border);
    padding-bottom: 10px; flex-shrink: 0;
}
.detail-title { 
    font-size: 1.8rem; margin: 0; line-height: 1.2; 
    color: var(--text-main); 
    white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}
.detail-meta { font-size: 0.95rem; margin-top: 5px; color: var(--text-muted); }

.meta-label { font-weight: 600; color: var(--primary); margin-right: 5px; }

.interact-tag {
    background: var(--bg-input);
    color: var(--text-main); 
    padding: 2px 10px; border-radius: 12px;
    font-size: 0.85rem; cursor: pointer; display: inline-block;
    border: 1px solid var(--border); 
    margin-right: 5px;
    transition: all 0.2s;
}
.interact-tag:hover { border-color: var(--primary); color: var(--primary); }

/* --- CONTENT ROW --- */
.detail-content-row { display: flex; gap: 25px; flex-shrink: 0; }

.detail-img-box {
    flex: 0 0 160px; height: 240px;
    background: var(--bg-body);
    border: 1px solid var(--border); 
    overflow: hidden;
    border-radius: 4px;
    box-shadow: var(--shadow);
}
.detail-cover { width: 100%; height: 100%; object-fit: cover; }

.detail-info-box { flex: 1; display: flex; flex-direction: column; overflow: hidden; }

.detail-price { 
    font-size: 1.6rem; font-weight: bold; 
    color: var(--primary); 
    margin-bottom: 5px; 
}

.detail-desc {
    font-family: 'Georgia', serif; font-size: 1rem; line-height: 1.6; 
    color: var(--text-main);
    margin-bottom: 15px; flex: 1; overflow-y: auto; padding-right: 8px;
    background: var(--bg-input);
    padding: 10px; border-radius: 4px;
}
.detail-desc::-webkit-scrollbar { width: 6px; }
.detail-desc::-webkit-scrollbar-thumb { background: var(--primary); border-radius: 3px; }

.detail-actions {
    display: flex; gap: 15px; padding-top: 15px;
    border-top: 1px solid var(--border);
}

/* --- REVIEWS --- */
.detail-reviews {
    flex: 1; 
    min-height: 200px; /* Minimum readable height */
    display: flex; 
    flex-direction: column;
    margin-top: 15px;
    border-top: 2px solid var(--primary); 
    background: var(--bg-input);
    border-radius: 4px; 
    padding: 15px;
}

.detail-reviews h3 { 
    color: var(--primary); 
    margin: 0 0 10px 0; 
    font-size: 1.2rem; 
    flex-shrink: 0; 
}

.review-list-container { 
    flex: 1; 
    overflow-y: auto; 
    padding-right: 5px; 
}

.review-list-container::-webkit-scrollbar { width: 6px; }
.review-list-container::-webkit-scrollbar-thumb { 
    background: var(--primary); 
    border-radius: 3px; 
}

.review-item { 
    border-bottom: 1px solid var(--border); 
    padding: 15px 0; /* More breathing room */
    margin-bottom: 10px;
}

.review-user { 
    font-weight: bold; 
    font-size: 1rem; 
    color: var(--text-main); 
    display: flex; 
    justify-content: space-between;
    margin-bottom: 8px; /* Space before content */
}

.review-content { 
    color: var(--text-main); /* Changed from muted */
    font-style: normal; /* Removed italic */
    font-size: 0.95rem; 
    line-height: 1.6; /* Better readability */
    white-space: pre-wrap; /* Preserve line breaks */
    word-wrap: break-word;
}

.review-stars { 
    color: var(--primary); 
    font-size: 1.1rem;
}

/* ========================================= */
/* === BOOK POPUP SKIN (Theme-Aware) ====== */
/* ========================================= */

#modal-box.book-skin {
    background: var(--bg-modal); 
    border: 6px double var(--border-modal);
    box-shadow: 0 40px 80px var(--bg-modal-overlay);
    color: var(--text-modal); 
    padding: 35px;
    overflow: hidden !important; 
    position: relative;
    transition: all 0.3s;
}

#modal-box.book-skin .detail-title { 
    color: var(--text-modal); 
    text-shadow: 0 2px 4px var(--bg-modal-overlay); 
}
#modal-box.book-skin .detail-desc { 
    color: var(--text-modal); 
    background: var(--bg-input);
}
#modal-box.book-skin .detail-meta { color: var(--text-muted); }

#modal-box.book-skin .interact-tag {
    background: var(--bg-input);
    color: var(--text-modal); 
    border-color: var(--border);
}
#modal-box.book-skin .interact-tag:hover { 
    border-color: var(--primary); 
    color: var(--primary); 
}

#modal-box.book-skin .detail-reviews {
    background: var(--bg-input);
    border-top-color: var(--primary);
}
#modal-box.book-skin .review-user { color: var(--text-modal); }
#modal-box.book-skin .review-content { color: var(--text-muted); }
#modal-box.book-skin .review-item { border-bottom-color: var(--border); }

#modal-box.book-skin .btn-outline {
    border-color: var(--primary); 
    color: var(--primary);
}
#modal-box.book-skin .btn-outline:hover {
    background: var(--primary); 
    color: var(--primary-text);
}

/* --- RESPONSIVE DIMENSIONS --- */
@media (min-width: 900px) {
    #modal-box.book-skin {
        width: 850px !important;  
        height: 75vh !important;
        max-width: 95vw;
        max-height: 90vh;
    }
}

@media (min-width: 600px) and (max-width: 899px) {
    #modal-box.book-skin {
        width: 90vw !important;
        height: 70vh !important;
    }
}

@media (max-width: 599px) {
    #modal-box.book-skin {
        width: 95vw !important;
        height: 90vh !important;
        padding: 20px;
    }
    .detail-content-row { flex-direction: column; height: auto; flex-shrink: 1; }
    .detail-img-box { display: none; }
    .detail-info-box { max-height: 250px; }
}
